function setAttributes(e,t){t&&Object.keys(t).forEach((r=>{e.setAttribute(r,t[r])}))}function getCacheBuster(e=!0){return e?"":`?${Date.now()}`}function createPromise(e){if(!e.url||!e.is)return Promise.reject(new Error("No url or type given!"));if(window.__ficusjs__.resources[e.url])return window.__ficusjs__.resources[e.url].promise;{const t=new Promise(((t,r)=>{const handleResponse=s=>{s.error||s.type&&"error"===s.type?r(s.error):(window.__ficusjs__.resources[e.url].hasLoaded=!0,t())};if("script"===e.is){const t=function(e,t=null,r=!0){const s=document.createElement("script");return s.setAttribute("type","text/javascript"),s.setAttribute("src",`${e}${getCacheBuster(r)}`),setAttributes(s,t),s}(e.url,e.attributes,e.cache);t.onerror=handleResponse,t.onload=handleResponse,document.body.appendChild(t)}else if("style"===e.is){const t=function(e,t=null,r=!0){const s=document.createElement("link");return s.setAttribute("rel","stylesheet"),s.setAttribute("type","text/css"),s.setAttribute("href",`${e}${getCacheBuster(r)}`),setAttributes(s,t),s}(e.url,e.attributes,e.cache);t.onerror=handleResponse,t.onload=handleResponse,document.getElementsByTagName("head")[0].appendChild(t)}}));return window.__ficusjs__.resources[e.url]={type:e.is,hasLoaded:!1,promise:t},t}}function loadResource(...e){if(window.__ficusjs__=window.__ficusjs__||{},window.__ficusjs__.resources=window.__ficusjs__.resources||{},!e.length)return Promise.resolve();const t=e.map((e=>createPromise(e)));return Promise.allSettled(t)}export{loadResource};
//# sourceMappingURL=main.mjs.map
